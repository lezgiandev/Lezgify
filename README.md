# Серверная часть Lezgify

## Установка и запуск

1. Клонируйте репозиторий
2. Создайте виртуальное окружение:
```bash
python -m venv .venv
source .venv/bin/activate  # для Linux/Mac
.venv\Scripts\activate     # для Windows
```
3. Установите зависимости:
```bash
pip install -r requirements.txt
```
4. Примените миграции:
```bash
python manage.py migrate
```
5. Запустите сервер:
```bash
python manage.py runserver
```


## Структура базы данных

### Пользователи (auth_user)
- `id` - первичный ключ
- `username` - имя пользователя
- `password` - хеш пароля
- `email` - email пользователя
- `is_active` - активен ли пользователь
- `is_staff` - является ли администратором
- `is_superuser` - является ли суперпользователем
- `date_joined` - дата регистрации
- `last_login` - дата последнего входа

### Алфавит (alphabet_letter)
- `id` - первичный ключ
- `letter` - буква алфавита
- `audio` - ссылка на аудио произношения

### Изученные буквы (alphabet_learned)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `letter` - внешний ключ на букву

### Словарь (dictionary_word)
- `id` - первичный ключ
- `word` - слово
- `category` - внешний ключ на категорию
- `part_of_speech` - внешний ключ на часть речи
- `origin` - внешний ключ на язык происхождения

### Категории слов (dictionary_category)
- `id` - первичный ключ
- `name` - название категории

### Части речи (dictionary_partofspeech)
- `id` - первичный ключ
- `name` - название части речи

### Языки происхождения (dictionary_origin)
- `id` - первичный ключ
- `language` - название языка

### Переводы слов (dictionary_translation)
- `id` - первичный ключ
- `word` - внешний ключ на слово
- `translation` - перевод
- `example` - пример использования

### Избранные слова (dictionary_favorite)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `translation` - внешний ключ на перевод

### Изученные слова (dictionary_learned)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `translation` - внешний ключ на перевод

### Библиотека (library_book)
- `id` - первичный ключ
- `title` - название книги
- `author` - автор
- `category` - внешний ключ на категорию
- `logo` - ссылка на обложку

### Категории книг (library_category)
- `id` - первичный ключ
- `name` - название категории

### Предложения (library_sentence)
- `id` - первичный ключ
- `text` - текст на русском
- `audio` - ссылка на аудио
- `translate` - перевод на лезгинский
- `book` - внешний ключ на книгу

### Завершенные книги (library_completed)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `book` - внешний ключ на книгу

### Закладки (library_bookmark)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `book` - внешний ключ на книгу

### Разговорник (phrasebook_phrase)
- `id` - первичный ключ
- `text` - текст фразы
- `category` - внешний ключ на категорию

### Категории фраз (phrasebook_category)
- `id` - первичный ключ
- `name` - название категории

### Переводы фраз (phrasebook_translation)
- `id` - первичный ключ
- `phrase` - внешний ключ на фразу
- `translation` - перевод
- `audio` - ссылка на аудио

### Избранные фразы (phrasebook_favorite)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `phrase` - внешний ключ на фразу

### Изученные фразы (phrasebook_learned)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `phrase` - внешний ключ на фразу

### Источники (sources_source)
- `id` - первичный ключ
- `text` - название источника
- `link` - ссылка на источник
- `category` - внешний ключ на категорию

### Категории источников (sources_category)
- `id` - первичный ключ
- `name` - название категории

### Отмеченные источники (sources_marked)
- `id` - первичный ключ
- `user` - внешний ключ на пользователя
- `source` - внешний ключ на источник

## API Endpoints

### Пользователь

#### Регистрация пользователя
- **URL:** `/api/user/register/`
- **Метод:** `POST`
- **Авторизация:** Не требуется.
- **Описание:** Регистрация нового пользователя.
- **Тело запроса:**
  - `username`: имя пользователя
  - `password`: пароль
- **Ответ:**
  - `username`: имя пользователя
  - `token`: JWT токен доступа
  - `refresh`: JWT токен обновления

#### Смена пароля
- **URL:** `/api/user/change-password/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Изменение пароля пользователя.
- **Тело запроса:**
  - `old_password`: текущий пароль
  - `new_password`: новый пароль
- **Ответ:**
  - `status`: статус операции

#### Получение токена
- **URL:** `/api/user/token/`
- **Метод:** `POST`
- **Авторизация:** Не требуется.
- **Описание:** Получение JWT токена для авторизации.
- **Тело запроса:**
  - `username`: имя пользователя
  - `password`: пароль
- **Ответ:**
  - `access`: JWT токен доступа
  - `refresh`: JWT токен обновления

#### Обновление токена
- **URL:** `/api/user/token/refresh/`
- **Метод:** `POST`
- **Авторизация:** Не требуется.
- **Описание:** Обновление JWT токена доступа.
- **Тело запроса:**
  - `refresh`: JWT токен обновления
- **Ответ:**
  - `access`: новый JWT токен доступа

### Алфавит

#### Получение букв алфавита
- **URL:** `/api/alphabet/letters/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка букв алфавита.
- **Тело запроса:** Пустое
- **Ответ:**
  - `letter`: буква
  - `audio`: ссылка на аудио произношения

#### Получение изученных букв
- **URL:** `/api/alphabet/learned/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение списка изученных букв.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `letter`: объект буквы

#### Добавление буквы в изученные
- **URL:** `/api/alphabet/learned/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавление буквы в список изученных.
- **Тело запроса:**
  - `letter_id`: id буквы
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `letter`: объект буквы

#### Удаление буквы из изученных
- **URL:** `/api/alphabet/learned/delete/?letter_id=id`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление буквы из списка изученных.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `letter`: объект буквы

#### Удаление всех изученных букв
- **URL:** `/api/alphabet/learned/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление всех букв из списка изученных.
- **Тело запроса:** Пустое
- **Ответ:** Удалено N букв из изученных

#### Получение количества изученных букв
- **URL:** `/api/alphabet/learned/count/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение количества изученных букв.
- **Тело запроса:** Пустое
- **Ответ:**
  - `count`: количество изученных букв

### Библиотека

#### Получение категорий книг
- **URL:** `/api/library/categories/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка категорий книг.
- **Тело запроса:** Пустое
- **Ответ:**
  - `category`: Объекты категорий книг

#### Получение книг
- **URL:** `/api/library/books/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка книг.
- **Тело запроса:** Пустое
- **Ответ:**
  - `count`: количество книг
  - `next`: номер следующей страницы
  - `results`:
    - `title`: название книги
    - `author`: автор
    - `category`: категория
    - `logo`: ссылка на обложку

#### Получение предложений книги
- **URL:** `/api/library/books/{id}/sentences/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка предложений книги.
- **Тело запроса:** Пустое
- **Ответ:**
  - `text`: текст на русском
  - `audio`: ссылка на аудио
  - `translate`: перевод на лезгинский

#### Получение завершенных книг
- **URL:** `/api/library/books/completed/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение списка завершенных книг.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `book`: объект книги

#### Получение закладок
- **URL:** `/api/library/books/bookmarks/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение списка закладок.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id закладки
  - `user`: id пользователя
  - `book`: объект книги

#### Удаление всех завершенных книг
- **URL:** `/api/library/books/completed/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление всех книг из списка завершенных.
- **Тело запроса:** Пустое
- **Ответ:** Удалено N книг из завершенных

#### Удаление всех закладок
- **URL:** `/api/library/books/bookmarks/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление всех закладок.
- **Тело запроса:** Пустое
- **Ответ:** Удалено N закладок

#### Получение количества завершенных книг
- **URL:** `/api/library/books/completed/count/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение количества завершенных книг.
- **Тело запроса:** Пустое
- **Ответ:**
  - `count`: количество завершенных книг

#### Добавление книги в завершенные
- **URL:** `/api/library/books/completed/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавление книги в список завершенных.
- **Тело запроса:**
  - `book_id`: id книги
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `book`: объект книги

#### Удаление книги из завершенных
- **URL:** `/api/library/books/completed/delete/?book_id=id`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление книги из списка завершенных.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `book`: объект книги

#### Добавление закладки
- **URL:** `/api/library/books/bookmarks/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавление закладки в книгу.
- **Тело запроса:**
  - `book_id`: id книги
- **Ответ:**
  - `id`: id закладки
  - `user`: id пользователя
  - `book`: объект книги

### Разговорник

#### Получение категорий фраз
- **URL:** `/api/phrasebook/categories/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка категорий фраз.
- **Тело запроса:** Пустое
- **Ответ:**
  - `category`: Объекты категорий фраз

#### Получение фраз
- **URL:** `/api/phrasebook/phrases/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка фраз.
- **Тело запроса:** Пустое
- **Ответ:**
  - `text`: текст фразы
  - `category`: категория фразы

#### Получение избранных фраз
- **URL:** `/api/phrasebook/favorites/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение списка избранных фраз.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `phrase`: объект фразы

#### Получение изученных фраз
- **URL:** `/api/phrasebook/learned/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение списка изученных фраз.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `phrase`: объект фразы

#### Получение переводов фразы
- **URL:** `/api/phrasebook/phrases/{id}/translations/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получение списка переводов фразы.
- **Тело запроса:** Пустое
- **Ответ:**
  - `phrase`: объект фразы
  - `translations`: объекты переводов

#### Добавление фразы в избранное
- **URL:** `/api/phrasebook/favorites/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавление фразы в избранное.
- **Тело запроса:**
  - `phrase_id`: id фразы
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `phrase`: объект фразы

#### Добавление фразы в изученные
- **URL:** `/api/phrasebook/learned/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавление фразы в изученные.
- **Тело запроса:**
  - `phrase_id`: id фразы
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `phrase`: объект фразы

#### Удаление фразы из избранного
- **URL:** `/api/phrasebook/favorites/delete/?phrase_id=id`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление фразы из избранного.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `phrase`: объект фразы

#### Удаление фразы из изученных
- **URL:** `/api/phrasebook/learned/delete/?phrase_id=id`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление фразы из изученных.
- **Тело запроса:** Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя
  - `phrase`: объект фразы

#### Удаление всех фраз из избранного
- **URL:** `/api/phrasebook/favorites/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление всех фраз из избранного.
- **Тело запроса:** Пустое
- **Ответ:** Удалено N фраз из избранного

#### Удаление всех фраз из изученных
- **URL:** `/api/phrasebook/learned/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаление всех фраз из изученных.
- **Тело запроса:** Пустое
- **Ответ:** Удалено N фраз из изученных

#### Получение количества изученных фраз
- **URL:** `/api/phrasebook/learned/count/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получение количества изученных фраз.
- **Тело запроса:** Пустое
- **Ответ:**
  - `count`: количество изученных фраз

### Словарь

#### Получение категорий словаря
- **URL:** `/api/dictionary/categories/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получаем список категорий словаря.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `category`: Объекты категории слов

#### Получение частей речи слов
- **URL:** `/api/dictionary/parts-of-speech/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получаем список частей речи слов.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `partOfSpeech`: Объекты категории слов

#### Получение слов
- **URL:** `/api/dictionary/words/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получаем список слов словаря.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `count`: количество источников
  - `next`: номер следующей страницы
  - `results`:
    - `word`: Объекты слов

#### Получение переводов слова
- **URL:** `/api/dictionary/words/{id}/translations/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получаем список переводов слова.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `word`: Объект выбранного слова 
  - `translations`: Объекты переводов выбранного слова

#### Получение избранных слов
- **URL:** `/api/dictionary/favorites/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получаем список избранных слов.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `id`: Объекты избранных слов
  - `user_id`: id пользователя
  - `translation`: объекты переводов слов

#### Получение изученных слов
- **URL:** `/api/dictionary/learned/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получаем список изученных слов.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `id`: Объекты избранных слов
  - `user`: id пользователя
  - `translation`: объекты переводов слов
  - `count`: количество изученных слов

#### Добавление слова в избранное
- **URL:** `/api/dictionary/favorites/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавляем слово в избранное.
- **Тело запроса:**: 
  - `translation_id`: id перевода
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя 
  - `translation`: Объект перевода слова

#### Добавление слов в изученное
- **URL:** `/api/dictionary/learned/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавляет слово в изученное.
- **Тело запроса:**: 
  - `translation_id`: id перевода
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя 
  - `translation`: Объект перевода слова

#### Удаление слова из изученного
- **URL:** `/api/dictionary/learned/delete/?translation_id=id`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаляем одно слово из изученного.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя 
  - `translation`: Объект перевода слова

#### Удаление слова из избранного
- **URL:** `/api/dictionary/favorites/delete/?translation_id=id`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаляем одно слово из избранного.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `id`: id записи
  - `user`: id пользователя 
  - `translation`: Объект перевода слова

#### Удаление всех слов из изученного
- **URL:** `/api/dictionary/learned/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаляем все изученные слова.
- **Тело запроса:**: Пустое
- **Ответ:** Удалено N слов из отмеченного

#### Удаление всех слов из избранного
- **URL:** `/api/dictionary/favorites/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаляем все избранные слова.
- **Тело запроса:**: Пустое
- **Ответ:** Удалено N слов из отмеченного

#### Получение количества изученных слов
- **URL:** `/api/dictionary/learned/count/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получаем количество изученных слов.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `count`: количество изученных слов

### Источники

#### Категории источников
- **URL:** `/api/sources/categories/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получаем список категорий источников.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `category`: Объекты категории источников

#### Источники
- **URL:** `/api/sources/all/`
- **Метод:** `GET`
- **Авторизация:** Не требуется.
- **Описание:** Получаем список источников.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `count`: количество источников
  - `next`: номер следующей страницы
  - `results`:
    - `source`: Объекты источников

#### Отмеченные источники
- **URL:** `/api/sources/marked/`
- **Метод:** `GET`
- **Авторизация:** Необходима.
- **Описание:** Получаем список отмеченных источников.
- **Тело запроса:**: Пустое
- **Ответ:**
  - `id`: id отметки
  - `user_id`: id пользователя
  - `source`: объект источника

#### Отмеченные источники
- **URL:** `/api/sources/marked/`
- **Метод:** `POST`
- **Авторизация:** Необходима.
- **Описание:** Добавляем источник в избранное.
- **Тело запроса:**: 
  - `source_id`: id источника
- **Ответ:**
  - `id`: id отметки
  - `user`: id пользователя
  - `source`: Объект источника

#### Отмеченные источники
- **URL:** `/api/sources/marked/delete/?source_id={id}`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаляем выбранный источник из отмеченного.
- **Тело запроса:**: Пустое
- **Ответ:** Пустой

#### Отмеченные источники
- **URL:** `/api/sources/marked/delete-all/`
- **Метод:** `DELETE`
- **Авторизация:** Необходима.
- **Описание:** Удаляем все отмеченные источники.
- **Тело запроса:**: Пустое
- **Ответ:** Удалено N источников из отмеченного

### Нейросети

#### Переводчик с озвучкой
- **URL:** `/api/translator/app/`
- **Метод:** `POST`
- **Авторизация:** Не требуется.
- **Описание:** Генерируем перевод слова с озвучкой.
- **Тело запроса:**
  - `text`: текст слова на русском.
- **Ответ:**
  - `translation`: текст перевода слова
  - `audio`: битовый код аудио файла

#### Генерация аудио на лезгинском
- **URL:** `/api/translator/tts/`
- **Метод:** `POST`
- **Авторизация:** Не требуется.
- **Описание:** Генерируем озвучку для лезгинского слова.
- **Тело запроса:**
  - `lezgin_text`: текст слова на лезгинском.
- **Ответ:**
  - `audio`: битовый код аудио файла